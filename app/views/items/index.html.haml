%h1 Listing items

%p#notice= notice

= form_tag items_path, :method => "get", id: "search-cases-form" do
  = text_field_tag :search, params[:search], placeholder: "Search Cases"
  = submit_tag "Search" 
  Filter Cases by Issue Type:
  - @issues_and_types.each do |object|
    %h3= object[0]
    - object[1].each do |issue|
      = "#{issue}"
      = check_box_tag "#{issue}", 1
  = submit_tag 'Refresh', :id => 'issues_refresh'

#{@items_alert_message}

%table
  %thead
    %tr
      %th Case ID
      %th{:class => @client_ssn_header}= link_to 'SSN', items_path(:sort_by => 'client_ssn'), :id => 'client_ssn_header'
      %th{:class => @client_name_header}= link_to 'Client Name', items_path(:sort_by => 'client_name'), :id => 'client_name_header'
      %th Date Opened
      %th Date Closed

  %tbody
    - @items.each do |item|
      %tr
        %td= item.case_id
        %td= item.client_ssn
        %td= item.client_name
        %td= item.date_opened
        %td= item.date_closed
        %td= link_to 'Show', item
        %td= link_to 'Edit', edit_item_path(item)

%br

= link_to 'New Item', new_item_path
